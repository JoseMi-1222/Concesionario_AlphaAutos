{% extends 'concesionario/base.html' %}

{% block title %}Detalle Concesionario{% endblock %}

{% block cabecera %}
<h1>Concesionario: {{ concesionario.nombre|title }}</h1>
{% endblock %}

{% block content %}
<div class="mb-3">
    {% if perms.AlphaAutos.change_concesionario %}
        <a class="btn btn-sm btn-outline-secondary" href="{% url 'AlphaAutos:editar_concesionario' concesionario.id %}">Editar</a>
    {% endif %}
    {% if perms.AlphaAutos.delete_concesionario %}
        <a class="btn btn-sm btn-outline-danger text-nowrap" href="{% url 'AlphaAutos:eliminar_concesionario' concesionario.id %}" onclick="return confirm('¿Estás seguro de que deseas eliminar?');">Eliminar</a>
    {% endif %}
</div>
<p><strong>Dirección:</strong> {{ concesionario.direccion }}</p>
<p><strong>Teléfono:</strong> {{ concesionario.telefono }}</p>
<p><strong>Ciudad:</strong> {{ concesionario.ciudad|title }}</p>

<h2>Empleados</h2>
{% if empleados %}
<ul>
    {% for e in empleados %}
        <li>{{ e.nombre|title }} — {{ e.puesto|title }} ({{ e.salario|floatformat:2 }} €)</li>
    {% empty %}
        <li>No hay empleados.</li>
    {% endfor %}
</ul>
{% else %}
<p>No hay empleados registrados.</p>
{% endif %}

<h2>Coches</h2>
{% if coches %}
<table border="1">
    <tr>
        <th>ID</th>
        <th>Marca</th>
        <th>Modelo</th>
        <th>Precio (€)</th>
        <th>Concesionario</th>
        <th>Acciones</th>
    </tr>
    {% for c in coches %}
        {% include 'concesionario/for_row_coche.html' with coche=c %}
    {% empty %}
        <tr><td colspan="4">No hay coches registrados.</td></tr>
    {% endfor %}
</table>

{% if coches|length >= 10 %}
    <p>Este concesionario tiene un amplio catálogo.</p>
{% else %}
    <p>Catálogo reducido.</p>
{% endif %}

{% else %}
<p>No hay coches registrados.</p>
{% endif %}
{% endblock %}
