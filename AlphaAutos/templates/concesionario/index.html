{% extends 'concesionario/base.html' %}
{% load static %}

{% block title %}Inicio - AlphaAutos{% endblock %}

{% block cabecera %}
{% endblock %}

{% block content %}

<div class="bg-light p-5 rounded-3 mb-4 shadow-sm text-center">
    <img src="{% static 'concesionario/img/logo.png' %}" alt="Logo" class="img-fluid mb-3" style="max-height: 150px;">
    <h1 class="display-5 fw-bold text-dark">Bienvenido a AlphaAutos</h1>
    <p class="fs-4 text-muted">Explora nuestra amplia gama de coches y gestiona tu concesionario.</p>
    
    <div class="alert alert-info d-inline-block py-1 px-3 mt-2 mb-0" role="alert">
        <small><i class="bi bi-clock"></i> Inicio de sesión: <strong>{{ request.session.fecha_inicio }}</strong></small>
    </div>
</div>

<div class="card mb-5 border-0 shadow-sm">
    <div class="card-body d-flex align-items-center justify-content-between bg-white rounded">
        <div>
            <h5 class="card-title mb-0 text-secondary">¿Qué necesitas consultar hoy?</h5>
        </div>
        <div class="dropdown">
            <button class="btn btn-primary dropdown-toggle px-4" type="button" data-bs-toggle="dropdown" aria-expanded="false">
              Seleccionar Consulta Rápida
            </button>
            <ul class="dropdown-menu dropdown-menu-end">
              <li><a class="dropdown-item" href="{% url 'AlphaAutos:coches_sin_ventas' %}">Coches sin ventas</a></li>
              <li><a class="dropdown-item" href="{% url 'AlphaAutos:coches_por_fecha' 2024 12 %}">Coches por fecha (Dic 2024)</a></li>
              <li><a class="dropdown-item" href="{% url 'AlphaAutos:coches_transmision' 'AT' %}">Coches Automáticos</a></li>
              <li><hr class="dropdown-divider"></li>
              <li><a class="dropdown-item" href="{% url 'AlphaAutos:coches_concesionario_texto' 1 'Golf' %}">Buscar 'Golf' (Conc. 1)</a></li>
              <li><a class="dropdown-item" href="{% url 'AlphaAutos:ultimo_cliente_coche' 3 %}">Último cliente (Coche 3)</a></li>
            </ul>
        </div>
    </div>
</div>

<div class="row g-4"> <div class="col-md-6">
        
        <div class="card shadow-sm mb-4">
            <div class="card-header bg-secondary text-white fw-bold">
                Gestión de Coches
            </div>
            <div class="list-group list-group-flush">
                {% if perms.AlphaAutos.add_coche %}
                <a href="{% url 'AlphaAutos:crear_coche' %}" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                    Crear nuevo coche <span class="badge bg-success rounded-pill">+</span>
                </a>
                {% endif %}
                {% if perms.AlphaAutos.view_coche %}
                <a href="{% url 'AlphaAutos:buscar_coches' %}" class="list-group-item list-group-item-action">Buscar coches</a>
                {% else %}
                <a>No tienes permiso para ver el contenido de coches.</a>
                {% endif %}
            </div>
        </div>

        <div class="card shadow-sm mb-4">
            <div class="card-header bg-secondary text-white fw-bold">
                Gestión de Marcas
            </div>
            <div class="list-group list-group-flush">
                {% if perms.AlphaAutos.add_marca %}
                <a href="{% url 'AlphaAutos:crear_marca' %}" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                    Crear marca <span class="badge bg-success rounded-pill">+</span>
                </a>
                {% endif %}
                {% if perms.AlphaAutos.view_marca %}
                <a href="{% url 'AlphaAutos:buscar_marcas' %}" class="list-group-item list-group-item-action">Buscar marcas</a>
                {% else %}
                <a>No tienes permiso para ver el contenido de marcas.</a>
                {% endif %}
            </div>
        </div>

        <div class="card shadow-sm mb-4">
            <div class="card-header bg-secondary text-white fw-bold">
                Gestión de Concesionarios
            </div>
            <div class="list-group list-group-flush">
                {% if perms.AlphaAutos.add_concesionario %}
                <a href="{% url 'AlphaAutos:crear_concesionario' %}" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                    Crear concesionario <span class="badge bg-success rounded-pill">+</span>
                </a>
                {% endif %}
                {% if perms.AlphaAutos.view_concesionario %}
                <a href="{% url 'AlphaAutos:buscar_concesionarios' %}" class="list-group-item list-group-item-action">Buscar concesionarios</a>
                {% else %}
                <a>No tienes permiso para ver el contenido de concesionarios.</a>
                {% endif %}
            </div>
        </div>

    </div>

    <div class="col-md-6">
        
        <div class="card shadow-sm mb-4">
            <div class="card-header bg-secondary text-white fw-bold">
                Gestión de Empleados
            </div>
            <div class="list-group list-group-flush">
                {% if perms.AlphaAutos.add_empleado %}
                <a href="{% url 'AlphaAutos:crear_empleados' %}" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                    Registrar empleado <span class="badge bg-success rounded-pill">+</span>
                </a>
                {% endif %}
                {% if perms.AlphaAutos.view_empleado %}
                <a href="{% url 'AlphaAutos:buscar_empleados' %}" class="list-group-item list-group-item-action">Buscar empleados</a>
                {% else %}
                <a>No tienes permiso para ver el contenido de empleados.</a>
                {% endif %}
            </div>
        </div>

        <div class="card shadow-sm mb-4">
            <div class="card-header bg-secondary text-white fw-bold">
                Gestión de Clientes
            </div>
            <div class="list-group list-group-flush">
                {% if perms.AlphaAutos.add_cliente %}
                <a href="{% url 'AlphaAutos:crear_cliente' %}" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                    Registrar cliente <span class="badge bg-success rounded-pill">+</span>
                </a>
                {% endif %}
                {% if perms.AlphaAutos.view_cliente %}
                <a href="{% url 'AlphaAutos:buscar_clientes' %}" class="list-group-item list-group-item-action">Buscar clientes</a>
                {% else %}
                <a>No tienes permiso para ver el contenido de clientes.</a>
                {% endif %}
            </div>
        </div>

        <div class="card shadow-sm mb-4">
            <div class="card-header bg-secondary text-white fw-bold">
                Gestión de Aseguradoras
            </div>
            <div class="list-group list-group-flush">
                {% if perms.AlphaAutos.add_aseguradora %}
                <a href="{% url 'AlphaAutos:crear_aseguradora' %}" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                    Registrar aseguradora <span class="badge bg-success rounded-pill">+</span>
                </a>
                {% endif %}
                {% if perms.AlphaAutos.view_aseguradora %}
                <a href="{% url 'AlphaAutos:buscar_aseguradoras' %}" class="list-group-item list-group-item-action">Buscar aseguradoras</a>
                {% else  %}
                <a>No tienes permiso para ver el contenido de aseguradoras.</a>
                {% endif %}
            </div>
        </div>

        <div class="card shadow-sm mb-4">
            <div class="card-header bg-secondary text-white fw-bold">
                Gestión de Ventas
            </div>
            <div class="list-group list-group-flush">
                {% if perms.AlphaAutos.add_venta %}
                <a href="{% url 'AlphaAutos:crear_venta' %}" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                    Registrar venta <span class="badge bg-success rounded-pill">+</span>
                </a>
                {% endif %}
                {% if perms.AlphaAutos.view_venta %}
                <a href="{% url 'AlphaAutos:buscar_ventas' %}" class="list-group-item list-group-item-action">Buscar ventas</a>
                {% else %}
                <a>No tienes permiso para ver el contenido de ventas.</a>
                {% endif %}
            </div>
        </div>
    </div>
</div>

{% endblock %}